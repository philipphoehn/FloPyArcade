language: python

services:
  - docker

before_install:
  - docker build -t flopyarcade/master --no-cache -f Dockerfile .

install:
  - docker run -p 81:81 flopyarcade/master python3 -m pip install codecov coverage

script:
  - docker run -p 81:81 flopyarcade/master python3 /FloPyArcade/test_FloPyArcade.py

ci_env1=`codecov --token="5243a254-feca-4875-ba8d-b09deb44981d"`
ci_env2=`bash <(curl -s https://codecov.io/env)`
after_success:
  - docker run -p 81:81 flopyarcade/master $ci_env1
  - docker run -p 81:81 flopyarcade/master $ci_env2
